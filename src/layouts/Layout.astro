---
import "../styles/global.css";
import type { Language } from "@/lib/translations";

interface Props {
  title?: string;
  description?: string;
  lang?: Language;
}

const {
  title = "Pilatopia | Your Pilates Utopia in Riyadh | استوديو بيلاتس النرجس الرياض",
  description = "Step into our women-only Pilates studio in Al Narjis, Riyadh and discover the transformative power of Pilates. Every session is a step toward the better you. استوديو بيلاتس نسائي في حي النرجس الرياض.",
  lang = "en",
} = Astro.props;

const isRTL = lang === "ar";

// JSON-LD Structured Data for Local Business
const structuredData = {
  "@context": "https://schema.org",
  "@type": "HealthClub",
  "@id": "https://pilatopia.studio/#organization",
  name: "Pilatopia",
  alternateName: "بيلاتوبيا",
  description:
    "A boutique Pilates studio offering reformer, tower, wunda chairs & ladder barrels, and private sessions in Al Narjis, Riyadh, Saudi Arabia.",
  url: "https://pilatopia.studio",
  telephone: "+966550614150",
  email: "jawaher@pilatopia.studio",
  address: {
    "@type": "PostalAddress",
    streetAddress: "Abi Bakr As Siddiq Rd, Al Aarid",
    addressLocality: "Riyadh",
    addressRegion: "Riyadh Province",
    postalCode: "13335",
    addressCountry: "SA",
  },
  geo: {
    "@type": "GeoCoordinates",
    latitude: 24.8614442,
    longitude: 46.6410144,
  },
  image: [
    "https://pilatopia.studio/images/seo/pilatopia-1x1.jpg",
    "https://pilatopia.studio/images/seo/pilatopia-4x3.jpg",
    "https://pilatopia.studio/images/seo/pilatopia-16x9.jpg",
  ],
  logo: "https://pilatopia.studio/logo.png",
  priceRange: "$$",
  currenciesAccepted: "SAR",
  paymentAccepted: "Cash, Credit Card, Mada, Apple Pay, Tamara, BNPL",
  openingHoursSpecification: [
    {
      "@type": "OpeningHoursSpecification",
      dayOfWeek: [
        "Saturday",
        "Sunday",
        "Monday",
        "Tuesday",
        "Wednesday",
        "Thursday",
      ],
      opens: "14:00",
      closes: "22:00",
    },
  ],
  sameAs: [
    "https://instagram.com/pilatopia.studio",
    "https://tiktok.com/@pilatopia.studio.sa",
    "https://apps.apple.com/us/app/pilatopia/id6747145107",
  ],
  hasMap: "https://maps.app.goo.gl/u19JqxiqnnuZLfnz5",
  areaServed: {
    "@type": "City",
    name: "Riyadh",
    "@id": "https://www.wikidata.org/wiki/Q3692",
  },
  audience: {
    "@type": "PeopleAudience",
    suggestedGender: "female",
  },
  potentialAction: {
    "@type": "ReserveAction",
    target: {
      "@type": "EntryPoint",
      urlTemplate: "https://apps.apple.com/us/app/pilatopia/id6747145107",
      actionPlatform: [
        "http://schema.org/IOSPlatform",
      ],
    },
    result: {
      "@type": "Reservation",
      name: "Pilates Class Booking",
    },
  },
  makesOffer: [
    {
      "@type": "Offer",
      "@id": "https://pilatopia.studio/#single-pass",
      name: "Single Pass",
      description: "One Pilates reformer class session",
      price: "290",
      priceCurrency: "SAR",
      availability: "https://schema.org/InStock",
      itemOffered: {
        "@type": "Service",
        name: "Pilates Reformer Class",
      },
    },
    {
      "@type": "Offer",
      "@id": "https://pilatopia.studio/#foundation-package",
      name: "Foundation Package",
      description: "5 Pilates classes. Valid for 30 days.",
      price: "1242",
      priceCurrency: "SAR",
      availability: "https://schema.org/InStock",
      priceValidUntil: "2026-01-31",
      includesObject: {
        "@type": "TypeAndQuantityNode",
        amountOfThisGood: 5,
        typeOfGood: {
          "@type": "Service",
          name: "Pilates Reformer Class",
        },
        unitText: "classes",
      },
    },
    {
      "@type": "Offer",
      "@id": "https://pilatopia.studio/#transformation-package",
      name: "Transformation Package",
      description:
        "10 Pilates classes. Best results in 5 weeks. Valid for 60 days.",
      price: "2241",
      priceCurrency: "SAR",
      availability: "https://schema.org/InStock",
      priceValidUntil: "2026-01-31",
      includesObject: {
        "@type": "TypeAndQuantityNode",
        amountOfThisGood: 10,
        typeOfGood: {
          "@type": "Service",
          name: "Pilates Reformer Class",
        },
        unitText: "classes",
      },
    },
    {
      "@type": "Offer",
      "@id": "https://pilatopia.studio/#dedication-package",
      name: "Dedication Package",
      description:
        "20 Pilates classes. Best value per class. Valid for 90 days.",
      price: "3555",
      priceCurrency: "SAR",
      availability: "https://schema.org/InStock",
      priceValidUntil: "2026-01-31",
      includesObject: {
        "@type": "TypeAndQuantityNode",
        amountOfThisGood: 20,
        typeOfGood: {
          "@type": "Service",
          name: "Pilates Reformer Class",
        },
        unitText: "classes",
      },
    },
  ],
  aggregateRating: {
    "@type": "AggregateRating",
    ratingValue: 5,
    reviewCount: 24,
    bestRating: 5,
    worstRating: 1,
  },
  hasOfferCatalog: {
    "@type": "OfferCatalog",
    name: "Pilates Classes",
    itemListElement: [
      {
        "@type": "ListItem",
        position: 1,
        item: {
          "@type": "Offer",
          itemOffered: {
            "@type": "Service",
            name: "Foundation",
            description:
              "Essential intro to the reformer machine. Required for all new members.",
          },
        },
      },
      {
        "@type": "ListItem",
        position: 2,
        item: {
          "@type": "Offer",
          itemOffered: {
            "@type": "Service",
            name: "Beginners Reformer",
            description:
              "Build strength, improve posture, and master fundamental movements for new practitioners.",
          },
        },
      },
      {
        "@type": "ListItem",
        position: 3,
        item: {
          "@type": "Offer",
          itemOffered: {
            "@type": "Service",
            name: "Intermediate Reformer",
            description:
              "Dynamic flows, increased resistance, and advanced variations.",
          },
        },
      },
      {
        "@type": "ListItem",
        position: 4,
        item: {
          "@type": "Offer",
          itemOffered: {
            "@type": "Service",
            name: "Jump Reformer",
            description:
              "High-intensity cardio Pilates with explosive jumpboard sequences.",
          },
        },
      },
      {
        "@type": "ListItem",
        position: 5,
        item: {
          "@type": "Offer",
          itemOffered: {
            "@type": "Service",
            name: "Chairs & Barrels",
            description:
              "Specialty equipment class using Wunda Chair and Ladder Barrel.",
          },
        },
      },
      {
        "@type": "ListItem",
        position: 6,
        item: {
          "@type": "Offer",
          itemOffered: {
            "@type": "Service",
            name: "Cadillac Mix",
            description: "Personalized exercises on the Cadillac tower system.",
          },
        },
      },
    ],
  },
};
---

<!doctype html>
<html lang={lang} dir={isRTL ? "rtl" : "ltr"} class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />

    <!-- Favicons -->
    <link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="shortcut icon" href="/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="manifest" href="/site.webmanifest" />
    <meta name="theme-color" content="#e8d5c4" />

    <meta name="generator" content={Astro.generator} />

    <!-- SEO Meta Tags -->
    <title>{title}</title>
    <meta name="description" content={description} />
    <meta
      name="keywords"
      content="Pilates Riyadh, Pilates Al Narjis, Pilates studio Saudi Arabia, reformer Pilates Riyadh, mat Pilates, بيلاتس الرياض, بيلاتس النرجس, استوديو بيلاتس, wellness Riyadh, fitness Riyadh, boutique studio"
    />

    <!-- Open Graph -->
    <meta
      property="og:title"
      content="Pilatopia | Your Pilates Utopia in Riyadh"
    />
    <meta
      property="og:description"
      content="Step into our women-only Pilates studio in Al Narjis, Riyadh and discover the transformative power of Pilates. Every session is a step toward the better you."
    />
    <meta property="og:type" content="website" />
    <meta property="og:locale" content="en_US" />
    <meta property="og:locale:alternate" content="ar_SA" />
    <meta property="og:site_name" content="Pilatopia" />
    <meta property="og:url" content="https://pilatopia.studio" />
    <meta
      property="og:image"
      content="https://pilatopia.studio/images/seo/og-image.jpg"
    />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:image:alt" content="Pilatopia Pilates Studio - Reformer and equipment room in Riyadh" />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta
      name="twitter:title"
      content="Pilatopia | Your Pilates Utopia in Riyadh"
    />
    <meta
      name="twitter:description"
      content="Step into our women-only Pilates studio in Al Narjis, Riyadh and discover the transformative power of Pilates. Every session is a step toward the better you."
    />
    <meta
      name="twitter:image"
      content="https://pilatopia.studio/images/seo/og-image.jpg"
    />
    <meta name="twitter:image:alt" content="Pilatopia Pilates Studio - Reformer and equipment room in Riyadh" />

    <!-- Canonical -->
    <link rel="canonical" href="https://pilatopia.studio" />
    <link rel="alternate" hreflang="en" href="https://pilatopia.studio" />
    <link rel="alternate" hreflang="ar" href="https://pilatopia.studio/ar" />

    <!-- Robots -->
    <meta name="robots" content="index, follow" />
    <meta
      name="googlebot"
      content="index, follow, max-video-preview:-1, max-image-preview:large, max-snippet:-1"
    />

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Arabic:wght@400;500;600;700&family=Rufina:wght@400;700&display=swap"
      rel="stylesheet"
    />

    <!-- Google Analytics 4 -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-0QH8NQR7MJ"
    ></script>
    <script is:inline>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      // Parse UTM parameters from URL
      var urlParams = new URLSearchParams(window.location.search);
      var campaignParams = {};

      if (urlParams.get('utm_source')) {
        campaignParams.campaign_source = urlParams.get('utm_source');
      }
      if (urlParams.get('utm_medium')) {
        campaignParams.campaign_medium = urlParams.get('utm_medium');
      }
      if (urlParams.get('utm_campaign')) {
        campaignParams.campaign_name = urlParams.get('utm_campaign');
      }
      if (urlParams.get('utm_term')) {
        campaignParams.campaign_term = urlParams.get('utm_term');
      }
      if (urlParams.get('utm_content')) {
        campaignParams.campaign_content = urlParams.get('utm_content');
      }

      gtag("config", "G-0QH8NQR7MJ", Object.assign({
        send_page_view: true,
        allow_google_signals: true,
        cookie_flags: "SameSite=None;Secure"
      }, campaignParams));
    </script>

    <!-- TikTok Pixel -->
    <script is:inline>
      !(function (w, d, t) {
        w.TiktokAnalyticsObject = t;
        var ttq = (w[t] = w[t] || []);
        ((ttq.methods = [
          "page",
          "track",
          "identify",
          "instances",
          "debug",
          "on",
          "off",
          "once",
          "ready",
          "alias",
          "group",
          "enableCookie",
          "disableCookie",
          "holdConsent",
          "revokeConsent",
          "grantConsent",
        ]),
          (ttq.setAndDefer = function (t, e) {
            t[e] = function () {
              t.push([e].concat(Array.prototype.slice.call(arguments, 0)));
            };
          }));
        for (var i = 0; i < ttq.methods.length; i++)
          ttq.setAndDefer(ttq, ttq.methods[i]);
        ((ttq.instance = function (t) {
          for (var e = ttq._i[t] || [], n = 0; n < ttq.methods.length; n++)
            ttq.setAndDefer(e, ttq.methods[n]);
          return e;
        }),
          (ttq.load = function (e, n) {
            var r = "https://analytics.tiktok.com/i18n/pixel/events.js",
              o = n && n.partner;
            ((ttq._i = ttq._i || {}),
              (ttq._i[e] = []),
              (ttq._i[e]._u = r),
              (ttq._t = ttq._t || {}),
              (ttq._t[e] = +new Date()),
              (ttq._o = ttq._o || {}),
              (ttq._o[e] = n || {}));
            n = document.createElement("script");
            ((n.type = "text/javascript"),
              (n.async = !0),
              (n.src = r + "?sdkid=" + e + "&lib=" + t));
            e = document.getElementsByTagName("script")[0];
            e.parentNode.insertBefore(n, e);
          }));
        ttq.load("D54I30RC77UFVMJSD0U0");
        ttq.page();
      })(window, document, "ttq");
    </script>

    <!-- Structured Data -->
    <script
      type="application/ld+json"
      set:html={JSON.stringify(structuredData)}
    />

    <style>
      :root {
        --font-rufina: "Rufina", Georgia, serif;
        --font-body: "IBM Plex Sans Arabic", system-ui, sans-serif;
      }
    </style>
  </head>
  <body class="antialiased" style="font-family: var(--font-body);">
    <slot />
  </body>
</html>
